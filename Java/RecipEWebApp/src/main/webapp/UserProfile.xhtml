<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/templates/UserProfileTemplate.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <!-- Define the page title -->
    <ui:define name="title">
        User Profile Management
    </ui:define>

    <!-- Main content -->
    <ui:define name="content">
        <h1>User Profile Management</h1>

        <!-- View a Specific User Profile -->
        <h:form id="viewProfile" style="margin-top: 30px;">
            <h3>My User Profile</h3>
            <h:panelGrid columns="2" style="margin-top: 20px;">
                <h:outputLabel value="Username:" />
                <h:outputText value="#{userProfileBean.username}" />
                <h:outputLabel value="Diet Type:" />
                <h:outputText value="#{userProfileBean.dietType}" />
                <h:outputLabel value="Calorie Limit:" />
                <h:outputText value="#{userProfileBean.calorieLimit}" />
                <h:outputLabel value="Meal Plan Preference:" />
                <h:outputText value="#{userProfileBean.mealPlanPreference}" />
                <h:outputLabel value="Allergies:" />
                <h:outputText value="#{userProfileBean.allergiesAsString}" />
                <h:outputLabel value="Disliked Ingredients:" />
                <h:outputText value="#{userProfileBean.dislikedIngredientsAsString}" />
            </h:panelGrid>
        </h:form>

        <!-- Update the Current User Profile -->
        <h:form id="updateProfile" style="margin-top: 30px;">
            <h3>Update Current User Profile</h3>
            <h:outputLabel for="updateUsername" value="Username:" />
            <h:inputText id="updateUsername" value="#{userProfileBean.username}" />
            <br />
            <h:outputLabel for="updatePassword" value="Password:" />
            <h:inputSecret id="updatePassword" value="#{userProfileBean.password}" />
            <br />
            <h:outputLabel for="updateDietType" value="Diet Type:" />
            <h:selectOneMenu id="updateDietType" value="#{userProfileBean.dietType}">
                <f:selectItem itemValue="VEGETARIAN" itemLabel="Vegetarian" />
                <f:selectItem itemValue="VEGAN" itemLabel="Vegan" />
                <f:selectItem itemValue="PALEO" itemLabel="Paleo" />
                <f:selectItem itemValue="KETOGENIC" itemLabel="Ketogenic" />
            </h:selectOneMenu>
            <br />
            <h:outputLabel for="updateCalorieLimit" value="Calorie Limit:" />
            <h:inputText id="updateCalorieLimit" value="#{userProfileBean.calorieLimit}" />
            <br />
            <h:outputLabel for="updateMealPlanPreference" value="Meal Plan Preference:" />
            <h:selectOneMenu id="updateMealPlanPreference" value="#{userProfileBean.mealPlanPreference}">
                <f:selectItem itemValue="DAY" itemLabel="Day" />
                <f:selectItem itemValue="WEEK" itemLabel="Week" />
            </h:selectOneMenu>
            <br />
            <h:outputLabel for="updateAllergies" value="Allergies (comma-separated):" />
            <h:inputTextarea id="updateAllergies" value="#{userProfileBean.allergiesAsString}" rows="3" cols="30" />
            <br />
            <h:outputLabel for="updateDislikedIngredients" value="Disliked Ingredients (comma-separated):" />
            <h:inputTextarea id="updateDislikedIngredients" value="#{userProfileBean.dislikedIngredientsAsString}" rows="3" cols="30" />
            <br />
            <h:commandButton value="Save Changes" action="#{userProfileBean.saveUserProfile}" />
        </h:form>

        <!-- Dialog for Messages -->
        <h3>Message:</h3>
        <h:outputText value="#{userProfileBean.dialogMessage}" style="color: red;" />
    </ui:define>
</ui:composition>